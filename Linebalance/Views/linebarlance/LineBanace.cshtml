@model IEnumerable<Linebalance.Models.GLinebalance>

    @using Linebalance.Models;

    @{
        ViewBag.Title = "DASHBORD";
        Layout = "~/Views/Shared/_Layout.cshtml";
        //List<MES_R_UTILIZE> Fre = ViewData["body"] as List<MES_R_UTILIZE>;
        ////List<MES_R_UTILIZE_> ChartLine = ViewData["ChLine"] as List<MES_R_UTILIZE_LINE>;
        ////List<MES>
        //List<Input> factory = ViewData["Fac"] as List<Input>;
        //List<Input> parea = ViewData["PArea"] as List<Input>;
        //List<Input> pplant = ViewData["Plant"] as List<Input>;
        List<OIRate> OI = ViewData["OI"] as List<OIRate>;
        List<R_LOGIN_FAC> facs = ViewData["Fac"] as List<R_LOGIN_FAC>;
        List<R_LOGIN_AREA> aears = ViewData["Area"] as List<R_LOGIN_AREA>;
        List<R_LOGIN_LINE> lines = ViewData["Line"] as List<R_LOGIN_LINE>;
        List<T_MODEL> modelZ = ViewData["Model"] as List<T_MODEL>;
        //List<Qfactory_new> FacBQ = ViewData["FacNew"] as List<Qfactory_new>;
        //ViewBag.User = @ViewBag.User;
        //ViewBag.fac = @ViewBag.fac;
        //List<Input> ldata = ViewData["body"] as List<Input>;
        <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
        <link rel='stylesheet' href='~/Css/datedanger.css'>

    }


    @*<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>*@
    <style type="text/css">
        .btn {
            background-color: DodgerBlue;
            background: #357EBD;
            border: none;
            color: white;
            padding: 8px 50px;
            font-size: 10px;
            cursor: pointer;
            border-radius: 3px 3px 3px 3px;
            font-family: 'Open Sans', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .btnE {
            /*background-color: DodgerBlue;*/
            /*background: linear-gradient(to top, hsl(182, 100%, 50%), #0082e6);*/
            background: #f5f5f5;
            /*background: linear-gradient(to top right, hsl(195, 100%, 40%), #22b9b9);*/
            border: none;
            color: #4E5066;
            padding: 8px 50px;
            font-size: 10px;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            font-family: 'Open Sans', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .btn:hover {
            color: #4E5066;
            background: #c5c5c8;
            /*background: linear-gradient(to top right, hsl(203 60% 57%), hsl(195, 100%, 40%));*/
        }

        .form-input-date {
            position: relative;
            font-family: Courier New;
            /*font-weight: 600;*/
            width: 34%;
            height: 28px;
            /*left: 10px;*/
            /*right: px;*/
            border: none;
            padding: 0 13px;
            /*padding-left: 10px;*/
            margin-right: 45px;
            box-shadow: none;
            outline: none;
            -webkit-transition: all .5s ease;
            -moz-transition: all .5s ease;
            -ms-transition: all .5s ease;
            -o-transition: all .5s ease;
            transition: all .5s ease;
        }

            .form-input-date.smooth-corner {
                border-radius: 3px;
            }

            .form-input-date.basic {
                border: 2px solid rgba(0, 0, 0, .15);
            }

                .form-input-date.basic:hover {
                    border-color: rgba(0, 0, 0, .35);
                    box-shadow: 0 0 5px rgba(0, 0, 0, .2);
                }

                .form-input-date.basic:focus {
                    border-color: #4285F4;
                    box-shadow: 0 0 10px rgba(66, 133, 244, .5);
                }

        .form-input {
            position: relative;
            font-family: Courier New;
            /*font-weight: 600;*/
            width: 18%;
            height: 28px;
            /*left: 10px;*/
            /*right: px;*/
            border: none;
            padding: 0 13px;
            /*padding-left: 10px;*/
            margin-right: 49px;
            box-shadow: none;
            outline: none;
            -webkit-transition: all .5s ease;
            -moz-transition: all .5s ease;
            -ms-transition: all .5s ease;
            -o-transition: all .5s ease;
            transition: all .5s ease;
        }


            .form-input.smooth-corner {
                border-radius: 3px;
            }

            .form-input.basic {
                border: 2px solid rgba(0, 0, 0, .15);
            }

                .form-input.basic:hover {
                    border-color: rgba(0, 0, 0, .35);
                    box-shadow: 0 0 5px rgba(0, 0, 0, .2);
                }

                .form-input.basic:focus {
                    border-color: #4285F4;
                    box-shadow: 0 0 10px rgba(66, 133, 244, .5);
                }

        .sup-box {
            /*background: #328ca6;*/
            width: auto;
            height: auto;
            padding: 30px 30px 30px 30px;
            position: absolute;
            top: 175px;
            left: 30px;
            right: 20px;
            bottom: auto;
            border-radius: 5px;
        }

        .sup-box-herd {
            background: #f5f5f5;
            /*background: linear-gradient(#006699, #0099cc);*/
            width: auto;
            height: 190px;
            padding: 30px 30px 30px 30px;
            position: absolute;
            top: 70px;
            left: 20px;
            right: 20px;
            bottom: auto;
            border-radius: 15px;
        }

        .sup-box-next {
            background: #f5f5f5;
            /*background: linear-gradient(#006699, #0099cc);*/
            width: auto;
            /*height: 290px;*/
            height: 470px;
            padding: 30px 30px 30px 30px;
            position: absolute;
            top: 275px;
            left: 20px;
            right: 20px;
            bottom: auto;
            border-radius: 15px;
        }



        .sup-box-right {
            background: #f5f5f5;
            width: auto;
            height: auto;
            padding: 30px 30px 30px 30px;
            position: absolute;
            top: 750px;
            left: 20px;
            right: 20px;
            bottom: auto;
            border-radius: 15px;
        }


        .sup-box-right-fix {
            background: #f5f5f5;
            width: 1px;
            height: 1px;
            padding: 30px 30px 30px 30px;
            position: absolute;
            top: 580px;
            left: 20px;
            right: 20px;
            bottom: auto;
            border-radius: 15px;
        }


        .btn-send {
            background-color: #660099;
            width: auto;
            color: #FFFFFF;
        }

        .box-button {
            width: auto;
            height: auto;
            padding: 30px 30px 30px 30px;
            position: absolute;
            top: 100px;
            left: auto;
            right: 30px;
            /*right: 10px;*/
            bottom: auto;
            border-radius: 15px;
        }

        .myButton {
            border: 1px solid #00afef;
            background-image: linear-gradient(to bottom right, #00afef, #00afef, #00afef);
            border-radius: 10px;
            display: inline-block;
            cursor: pointer;
            color: #fff;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 15px;
            margin-right: 10px;
            left: 300px;
            font-weight: bold;
            padding: 9px 32px;
            text-decoration: none;
            text-shadow: 0px 1px 0px #ffffff;
        }

        th {
            background: #9bdbf3;
        }

        .scroll-pane {
            width: auto;
            /*width: 1000px;*/
            overflow: auto;
            padding-right: 10px;
            height: 100px;
        }

        .bottomshadow {
            position: absolute;
            top: 375px;
            /*left: -47px;*/
            z-index: 9999;
        }

        .jScrollPaneContainer {
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .jScrollPaneTrack {
            position: absolute;
            cursor: pointer;
            right: 0;
            top: 0;
            height: 100%;
            background: url(../images/bar.jpg) top center repeat-y;
            padding: 3px;
        }

        .jScrollPaneDrag {
            position: absolute;
            background: url(../images/ball.png) center center no-repeat;
            cursor: pointer;
            overflow: hidden;
        }

        .xyz-class .dropdown-menu {
            width: 100%
        }
        input:checked {
            height: 15px;
            width: 15px;
        }

    </style>
    <body>
        <div id="LoginC">
            </div>

        <div class="policy-container">
            <div class="policy-table">
                <div class="sup-box-herd">
                    <form id="on">
                        <div class="xyz-class">
                            <label>Factory:</label>
                            <select id="factory" name="factory" class="combobox form-input basic smooth-corner" value="">

                                @for (int i = 0; i < 1; i++)
                                {
                                    <option id="op1">@facs[0].FACTORY</option>

                                }

                            </select>
                            <label>Area:</label>
                            <select id="Area" name="Area" class="combobox form-input basic smooth-corner" onchange="selArea()" value="">

                                @for (int i = 0; i < aears.Count; i++)
                                {
                                    <option id="i">@aears[i].PROD_AREA_DESC</option>

                                }

                            </select>
                            <label>Line:</label>
                            <input id="Line" list="Line" class="combobox form-input basic smooth-corner">
                            <datalist id="Line" name="Line" class="combobox form-input basic smooth-corner" value="">

                                @for (int i = 0; i < lines.Count; i++)
                                {
                                    <option id="op1">@lines[i].LINE_NAME</option>

                                }

                            </datalist>

                            <label>Model:</label>
                            <input id="Model" list="Model" class="combobox form-input basic smooth-corner">
                            <datalist id="Model" name="Model" class="combobox form-input basic smooth-corner" value="">

                                @for (int i = 0; i < modelZ.Count; i++)
                                {
                                    <option id="op1">@modelZ[i].MODEL_NAME</option>

                                }

                            </datalist>
                            @*<input id="DateId" type='datetime-local' class="form-control text-center" placeholder="DD MMM, YYYY" readonly="readonly" />*@



                            <br />
                            <br />
                            <label style="padding-right: 0px" for="STREET">Date:</label>
                            <input id="Date" type="text" name="daterange" class="form-input-date basic smooth-corner" value="" />
                        </div>

                        <br />
                        Count 0: <input type="checkbox" id="myCheck">
                        <br />
                        <div class="box-button">
                            <button id="Query" name="Query" class="myButton">Query</button>
                            <button class="myButton">@Html.ActionLink("Download", "DownloadFile")</button>
                            <button id="Reset" name="Reset" class="myButton">Reset</button>
                            @*<button type="button" onclick="myFunction()">Try it</button>*@
                        </div>

                    </form>
                </div>
                <div id="tableRe">
                    <div class="sup-box-right-fix">
                        <div class="scroll-pane">
                            <table id="datatable">

                                <thead>

                                    <tr>

                                        <th></th>

                                        <th>Machine</th>
                                        <th>OI rate</th>


                                    </tr>

                                </thead>

                                <tbody>

                                    @foreach (var item in Model)
                                    {
                                    <tr>
                                        <th>@item.EQUIPMENT_CODE</th>
                                        <td>@item.CYCLETIME</td>
                                        <td>@item.CYCLETIME</td>

                                    </tr>

                                    }


                                </tbody>

                            </table>
                        </div>
                    </div>
                    <div class="sup-box-next highcharts-b highcharts-figure">
                        <div id="container" style="width: 100%; height: 420px; margin: 0 auto"></div>
                    </div>
                    <div class="sup-box-right">
                        @*<button class="btnE"><i class="fas fa-file-export" style="font-size: 15px;">@Html.ActionLink("Export", "DownloadFile")</i></button>*@
                        <div class="scroll-pane">
                            <table id="QueryTable" class="table-fill" overflow:auto;>

                                <thead>
                                    <tr>
                                        <th>FACTORY</th>
                                        @*<th>Production Plan</th>*@
                                        @foreach (var items in Model)
                                        {
                                            <th id="@items.EQUIPMENT_CODE">@items.EQUIPMENT_CODE</th>
                                        }

                                    </tr>
                                </thead>
                                <tbody>

                                    <tr>

                                        <td>@facs[0].SCHEMA</td>

                                        @*<td>@Fre[0].PROD_AREA</td>*@

                                        @foreach (var item in Model)
                                        {

                                            <td @*onclick="gDate(this)"*@>@item.CYCLETIME %</td>

                                        }
                                    </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
               
            </div>
    </div>
</body>

    <script language="javascript" type="text/javascript">
    $(document).ready(function () {
        setTimeout(function () {
            location.reload();
        }, 3000000);

        $('#DateId').daterangepicker(
            {
                "singleDatePicker": true,
                "startDate": moment(),
                "endDate": moment().endOf('year'),
                "opens": "center"
            });

        Highcharts.chart('container', {

            data: {
                table: document.getElementById('datatable')
            },

            series: [{
                type: 'column',
                color: '#00ADD4'
            },
            {
                type: 'line',
                color: '#64D7D7',
                lineWidth: 3


            }],
            //plotOptions: {
            //    line: { // <--- Chart type here, check the API reference first!
            //        marker: {
            //            enabled: false
            //        }
            //    }
            //},

            title: {

                text: 'Line Balance'

            },

            yAxis: {
                min: 0,
                title: {
                    text: ''
                }
            },
            tooltip : {
                mode: 'index',
                callbacks: {
                    labelColor: tooltipItem => {
                        var color = tooltipItem.datasetIndex == 0 ? 'green' : 'red';
                        return {
                            borderColor: color,
                            backgroundColor: color
                        }
                    }
                }

            }

        });


    });


    $(function () {
        $('input[name="daterange"]').daterangepicker({
            opens: 'left'
        }, function (start, end, label) {
            console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
        });
    });
    function gDate(x) {

        alert("Row index is: " + x.rowIndex);
    }

    function ajaxSet(url, method, postData) {
        return {
            type: method,
            url: url,
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(postData),
            dataType: "html",
        };
    }

    function LoadInfo() {
        var x = document.getElementById("myCheck").checked;

        $("#id").empty();
        var fac = {};
        fac.factory = $("#factory").val();
        fac.Area = $("#Area").val();
        fac.line = $("#Line").val();
        fac.model = $("#Model").val();
        fac.date = $("#Date").val();
        fac.check = x;


            var Settings = ajaxSet("@Url.Action("ConLineBalance", "linebarlance")", "POST", fac);
            $.ajax(Settings).done(function (resHtml) {
                $('#tableRe').html('');
                $('#tableRe').html(resHtml);


            }).fail(function (res) {
                $('#tableRe').html(res.responseText);
            });

        

    }
    $("#Query").click(function (e) {

        e.preventDefault()
        LoadInfo();

    });





    //$('#QueryTable tbody').on('click', 'tr', function () {
    //    var data = table.row(this).data();
    //    alert('You clicked on ' + data[0] + '\'s row');
    //});

    //$("#QueryTable tbody td").click(function () {
    //    console.log($(this).text());
    //});

    $("#Export").click(function () {
        var fac = {};
        fac.plant = $("#plant").val();
        fac.factory = $("#factory").val();
        //fac.START = $("#START").val();
        //fac.END = $("#END").val();
        fac.paera = $("#paera").val();
        fac.line = $("#line").val();
        jQuery.ajax({
            type: "POST",
            url: "/Home/BntExport",
            data: JSON.stringify(fac),
            dataType: "json",
            contentType: "application/json",
            traditional: true,
            success: function (data) {
                //alert("ok");
            }
        });
    });

    $("#Reset").click(function () {
        jQuery.ajax({
            type: "POST",
            url: "Utilization/Home/BntReset",
            //data: JSON.stringify(fac),
            dataType: "json",
            contentType: "application/json",
            traditional: true,

        });
    });



    </script>





